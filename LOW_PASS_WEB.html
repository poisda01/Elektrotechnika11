<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DolnÃ­ propust</title>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="topic.css">
<link rel="icon" href="IMG/logo.png">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>


<body>

<header>Elektrotechnika 2 â€“ DolnÃ­ propust</header>

<main class="topic">

<section class="card">
  <h2>Teorie</h2>
  <p>
    DolnÃ­ propust je elektrickÃ½ filtr, kterÃ½ propouÅ¡tÃ­ signÃ¡ly o nÃ­zkÃ½ch frekvencÃ­ch a potlaÄuje signÃ¡ly o vysokÃ½ch frekvencÃ­ch. 
    JejÃ­m hlavnÃ­m Ãºkolem je odstranit vysokofrekvenÄnÃ­ ruÅ¡enÃ­ ze signÃ¡lu a zachovat jeho pomalu se mÄ›nÃ­cÃ­ sloÅ¾ku.
  </p>
  <p>
    ZÃ¡kladnÃ­ RC dolnÃ­ propust je tvoÅ™ena odporem R a kondenzÃ¡torem C. V tomto zapojenÃ­ je vÃ½stupnÃ­ napÄ›tÃ­ odebÃ­rÃ¡no z kondenzÃ¡toru.Â¨
    Pro nÃ­zkÃ© frekvence mÃ¡ kondenzÃ¡tor vysokou impedanci, a proto se na nÄ›m objevÃ­ tÃ©mÄ›Å™ celÃ© vstupnÃ­ napÄ›tÃ­.
    PÅ™i vyÅ¡Å¡Ã­ch frekvencÃ­ch impedance kondenzÃ¡toru klesÃ¡ a vysokofrekvenÄnÃ­ sloÅ¾ky signÃ¡lu jsou vÃ½raznÄ› tlumeny.
  </p>
  <p>DÅ¯leÅ¾itÃ½m parametrem hornÃ­ propusti je meznÃ­ frekvence ğ‘“ğ‘. PÅ™i tÃ©to frekvenci klesne amplituda vÃ½stupnÃ­ho napÄ›tÃ­ na pÅ™ibliÅ¾nÄ› 70,7 % vstupnÃ­ hodnoty, 
  coÅ¾ odpovÃ­dÃ¡ zesÃ­lenÃ­ âˆ’3 dB. MeznÃ­ frekvence je dÃ¡na vztahem:
  </p>
  <img src="IMG/MEZ_F.png" style="width: 12%;">
  <p>
   DolnÃ­ propusti se velmi Äasto pouÅ¾Ã­vajÃ­ v napÃ¡jecÃ­ch zdrojÃ­ch k vyhlazovÃ¡nÃ­ napÄ›tÃ­, v mÄ›Å™icÃ­ technice k potlaÄenÃ­ Å¡umu a v audiotechnice pro omezenÃ­ vysokÃ½ch frekvencÃ­. 
   UplatnÄ›nÃ­ nachÃ¡zejÃ­ takÃ© v systÃ©mech zpracovÃ¡nÃ­ signÃ¡lÅ¯, kde je potÅ™eba oddÄ›lit pomalu se mÄ›nÃ­cÃ­ signÃ¡l od rychlÃ½ch zmÄ›n. 
  </p>
  <img src="IMG/LOW_PASS.png" style="width: 40%;">
</section>

<section class="card">
  <h2>VÃ½poÄet</h2>

  <div class="form-group">
    <input type="number" id="resistor" placeholder="R (Î©)">
    <input type="number" id="capacitor" placeholder="C (ÂµF)">
    <input type="number" id="vin" placeholder="U vstupnÃ­ (V)">
    <input type="number" id="fc" placeholder="MeznÃ­ frekvence fâ‚™ (Hz)" readonly>
    <input type="number" id="vout" placeholder="U vÃ½stupnÃ­ (V)" readonly>
    <input type="number" id="gain" placeholder="ZesÃ­lenÃ­ Aáµ¤ (dB)" readonly>
  </div>

  <button onclick="calculate()">SpoÄÃ­tat</button>

  <p id="result"></p>
</section>

<section class="card">
  <h2>Grafy</h2>
  <canvas id="ampChart" height="300"></canvas>
  <canvas id="gainChart" height="300"></canvas>
</section>

</main>

<script>
let chartAmp = null;
let chartDB = null;

function calculate() {
  const R = parseFloat(document.getElementById('resistor').value);
  const Cmicro = parseFloat(document.getElementById('capacitor').value);
  const Vin = parseFloat(document.getElementById('vin').value);

  if (isNaN(R) || isNaN(Cmicro) || isNaN(Vin) || R <= 0 || Cmicro <= 0 || Vin <= 0) {
    alert("Zadejte platnÃ© hodnoty R, C a U!");
    return;
  }

  const C = Cmicro / 1e6;
  const fc = 1 / (2 * Math.PI * R * C);

  document.getElementById('fc').value = fc.toFixed(2);

  const omega = 2 * Math.PI * fc;
  const H = 1 / Math.sqrt(1 + (omega * R * C) ** 2);
  const Vout = Vin * H;
  const Gain = 20 * Math.log10(H);

  document.getElementById('vout').value = Vout.toFixed(3);
  document.getElementById('gain').value = Gain.toFixed(2);



  drawGraphs(R, C, Vin, fc);
}

function drawGraphs(R, C, Vin, fc) {
  const amp = [];
  const db = [];
  const critAmp = [];
  const critDB = [];

  for (let f = 1; f <= 100000; f *= 1.15) {
    const x = 2 * Math.PI * f * R * C;
    const H = 1 / Math.sqrt(1 + x * x);

    amp.push({ x: f, y: H * 100 });
    db.push({ x: f, y: 20 * Math.log10(H) });

    if (Math.abs(f - fc) / fc < 0.05) {
      critAmp.push({ x: f, y: H * 100 });
      critDB.push({ x: f, y: 20 * Math.log10(H) });
    }
  }

  if (chartAmp) chartAmp.destroy();
  if (chartDB) chartDB.destroy();

  chartAmp = new Chart(document.getElementById('ampChart'), {
    type: 'line',
    data: {
      datasets: [
        {
          label: 'PÅ™enos |H| [%]',
          data: amp,
          borderColor: 'blue',
          pointRadius: 0
        },
        {
          label: 'MeznÃ­ frekvence',
          data: critAmp,
          borderColor: 'red',
          showLine: false,
          pointRadius: 6
        }
      ]
    },
    options: {
      plugins: {
        tooltip: {
          callbacks: {
            title: () => '',
            label: c =>
              `f = ${c.parsed.x.toFixed(2)} Hz, |H| = ${c.parsed.y.toFixed(2)} %`
          }
        }
      },
      scales: {
        x: {
          type: 'logarithmic',
          title: { display: true, text: 'Frekvence [Hz]' }
        },
        y: {
          title: { display: true, text: 'PÅ™enos [%]' }
        }
      }
    }
  });

  chartDB = new Chart(document.getElementById('gainChart'), {
    type: 'line',
    data: {
      datasets: [
        {
          label: 'ZesÃ­lenÃ­ Aáµ¤ [dB]',
          data: db,
          borderColor: 'blue',
          pointRadius: 0
        },
        {
          label: 'MeznÃ­ frekvence',
          data: critDB,
          borderColor: 'red',
          showLine: false,
          pointRadius: 6
        }
      ]
    },
    options: {
      plugins: {
        tooltip: {
          callbacks: {
            title: () => '',
            label: c =>
              `f = ${c.parsed.x.toFixed(2)} Hz, Aáµ¤ = ${c.parsed.y.toFixed(2)} dB`
          }
        }
      },
      scales: {
        x: {
          type: 'logarithmic',
          title: { display: true, text: 'Frekvence [Hz]' }
        },
        y: {
          title: { display: true, text: 'ZesÃ­lenÃ­ [dB]' }
        }
      }
    }
  });
}
</script>

</body>
</html>
